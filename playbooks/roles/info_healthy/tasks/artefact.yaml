---
- name: Look for artefact
  when: artefact_paths | length > 0
  changed_when: false
  ansible.builtin.find:
    paths: "{{ artefact_paths }}"
    patterns: "{{ artefact_patterns }}"
    recurse: true
    hidden: true
    follow: true
    size: "{{ artefact_size }}"
    get_checksum: true
  register: _result

- name: Work on found artefact
  when: _result.files is defined and _result.files | length > 0
  ansible.builtin.include_tasks: _artefact.yaml
  loop_control:
    label: "{{ item.path }}    {{ item.size }}"
  loop: "{{ _result.files }}"
