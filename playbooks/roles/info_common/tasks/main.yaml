---
- name: Main
  module_defaults:
    ansible.builtin.lineinfile:
      create: true
      firstmatch: true
      mode: "0644"
  block:
    - name: Create Prometheus config files
      ansible.builtin.import_tasks: targets.yaml
      tags:
        - targets

    - name: Uname
      ansible.builtin.import_tasks: uname.yaml
      tags:
        - uname

    - name: Uptime
      ansible.builtin.import_tasks: uptime.yaml
      tags:
        - uptime
