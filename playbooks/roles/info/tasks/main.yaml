---
- name: Ansible defaults
  ansible.builtin.setup:
    gather_subset:
      - "!all"
      - "all_ipv4_addresses"
    gather_timeout: 20

- name: "Ensure that the tmp dir does exist: {{ tmp_dir }}"
  ansible.builtin.file:
    path: "{{ tmp_dir }}"
    state: directory
    mode: "0755"

- name: Import hashed-fingerprint
  ansible.builtin.import_tasks: hashed-fingerprint.yaml
  tags:
    - bridgeline
    - bto
    - onionoo
    - wellknown

- name: Bridge Line
  ansible.builtin.import_tasks: bridgeline.yaml
  tags:
    - never
    - bridgeline

- name: Bto
  ansible.builtin.import_tasks: bto.yaml
  tags:
    - bto

- name: Clients
  ansible.builtin.import_tasks: clients.yaml
  tags:
    - clients

- name: Log
  ansible.builtin.import_tasks: log-notice.yaml
  tags:
    - log
    - log-notice
    - never

- name: Log system
  ansible.builtin.import_tasks: log-system.yaml
  tags:
    - log
    - log-system
    - never

- name: Log unattended
  ansible.builtin.import_tasks: log-unattended.yaml
  tags:
    - log
    - log-unattended
    - never

- name: Log warn
  ansible.builtin.import_tasks: log-warn.yaml
  tags:
    - log
    - log-warn
    - never

- name: Onionoo
  ansible.builtin.import_tasks: onionoo.yaml
  tags:
    - onionoo

- name: Uname
  ansible.builtin.import_tasks: uname.yaml
  tags:
    - uname

- name: Uptime
  ansible.builtin.import_tasks: uptime.yaml
  tags:
    - uptime

- name: Version of Tor
  ansible.builtin.import_tasks: version.yaml
  tags:
    - version

- name: Wellknown
  ansible.builtin.import_tasks: wellknown.yaml
  tags:
    - never
    - wellknown

