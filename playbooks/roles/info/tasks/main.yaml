---
- name: Ansible defaults
  ansible.builtin.setup:
    gather_subset:
      - "!all"
      - "all_ipv4_addresses"
    gather_timeout: 20

- name: "Ensure that the tmp dir does exist: {{ tmp_dir }}"
  ansible.builtin.file:
    path: "{{ tmp_dir }}"
    state: directory
    mode: "0755"

- name: Clients
  ansible.builtin.import_tasks: clients.yaml
  tags:
    - clients

- name: Log
  ansible.builtin.import_tasks: log-notice.yaml
  tags:
    - log
    - log-notice

- name: Log warn
  ansible.builtin.import_tasks: log-warn.yaml
  tags:
    - log
    - log-warn

- name: Log unattended
  ansible.builtin.import_tasks: log-unattended.yaml
  tags:
    - log
    - log-unattended

- name: Log system
  ansible.builtin.import_tasks: log-system.yaml
  tags:
    - log
    - log-system

- name: Uname
  ansible.builtin.import_tasks: uname.yaml
  tags:
    - uname

- name: Uptime
  ansible.builtin.import_tasks: uptime.yaml
  tags:
    - uptime

- name: Tor version
  ansible.builtin.import_tasks: version.yaml
  tags:
    - version

- name: Import hashed-fingerprint
  ansible.builtin.import_tasks: ../../lib/hashed-fingerprint.yaml
  tags:
    - bto
    - onionoo

- name: Onionoo
  ansible.builtin.import_tasks: onionoo.yaml
  tags:
    - onionoo

- name: ORPort
  ansible.builtin.import_tasks: orport.yaml
  tags:
    - never
    - orport

- name: Bto
  ansible.builtin.import_tasks: bto.yaml
  tags:
    - bto
